import{_ as Q}from"./ChatLogDetail.vue_vue_type_script_setup_true_lang-BBCU-PH-.js";import{d as W,u as X,g as d,h as Y,c as g,b as s,j as v,w as l,f as e,k as M,r as n,i as Z,e as i,t as _,F as I,l as J,o as u,m as ee,_ as te}from"./index-DVeXf4sg.js";const le={class:"d-flex split-layout"},ae={class:"section pa-4"},ne=["href"],oe={class:"text-subtitle-1 mb-2"},se={class:"text-subtitle-1 mb-2"},ue=["href"],ie={class:"text-subtitle-1 mb-2"},de=["innerHTML"],_e={class:"section pa-4"},re={style:{"overflow-y":"auto",height:"100%"}},ce=W({__name:"JobFittingView",props:{job_id:{},expand_chat_log_id:{}},setup(z){const N=Z("apiClient"),E=X(),V=z,o=d(null),p=d(0),k=d([]),y=d([]),w=d(!1),h=d(""),j=d(""),m=d();async function H(f){try{const{data:t}=await N.client.get(`/jobs/${f}`).then(({data:r})=>r);o.value=t.job}catch(t){console.error("Error fetching job:",t)}}async function A(f){w.value=!0;const t=await N.client.post(`/jobs/fitting_by_ai/${f.id}`,{restriction:h.value,resume:j.value}).then(r=>r).catch(r=>r).finally(()=>w.value=!1);m.value=t.data.result}return Y(()=>{H(V.job_id),V.expand_chat_log_id&&(k.value.push("chat_logs"),y.value.push(V.expand_chat_log_id))}),(f,t)=>{const r=n("v-tooltip"),R=n("v-btn"),C=n("v-card-title"),F=n("v-icon"),O=n("v-divider"),U=n("v-expansion-panel-title"),L=n("v-expansion-panel-text"),B=n("v-expansion-panel"),T=n("v-chip"),$=n("v-expansion-panels"),b=n("v-card-text"),x=n("v-card"),S=n("v-progress-circular"),D=n("v-textarea"),q=n("v-tab"),G=n("v-tabs"),K=n("v-tabs-window-item"),P=n("v-tabs-window");return u(),g("div",le,[s("div",ae,[o.value!==null?(u(),v(x,{key:0},{default:l(()=>[e(C,{class:"text-h5"},{default:l(()=>[i(_(o.value.title)+" ",1),e(R,{icon:"mdi-link"},{default:l(()=>[s("a",{href:o.value.url,target:"_blank"},"Link",8,ne),e(r,{activator:"parent",location:"bottom"},{default:l(()=>t[7]||(t[7]=[i("Open job in another tab")])),_:1})]),_:1})]),_:1}),e(b,null,{default:l(()=>[s("div",oe,[e(F,{icon:"mdi-currency-usd",class:"mr-1"}),i(" "+_(o.value.salary),1)]),s("div",se,[e(F,{icon:"mdi-briefcase",class:"mr-1"}),s("a",{href:o.value.company.link,target:"_blank"},_(o.value.company.name),9,ue)]),s("div",ie,[e(F,{icon:"mdi-map-marker",class:"mr-1"}),i(" "+_(o.value.location),1)]),e(O,{class:"my-4"}),e($,{modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=a=>k.value=a)},{default:l(()=>[e(B,{value:"description"},{default:l(()=>[e(U,null,{default:l(()=>t[8]||(t[8]=[s("strong",null,"Description",-1)])),_:1}),e(L,null,{default:l(()=>[s("div",{innerHTML:o.value.raw_description},null,8,de)]),_:1})]),_:1}),e(B,{value:"chat_logs"},{default:l(()=>[e(U,null,{actions:l(()=>[e(T,{size:"small",class:"ml-2"},{default:l(()=>{var a;return[i(_(((a=o.value.chat_logs)==null?void 0:a.length)||0)+" conversations",1)]}),_:1})]),default:l(()=>[t[9]||(t[9]=s("strong",null,"Chat Logs",-1))]),_:1}),e(L,null,{default:l(()=>[e($,{modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=a=>y.value=a)},{default:l(()=>[(u(!0),g(I,null,J(o.value.chat_logs,(a,c)=>(u(),v(B,{key:c,value:a.id},{default:l(()=>[e(U,null,{default:l(()=>[e(T,{size:"small",color:"primary",class:"mr-2"},{default:l(()=>[i(_(ee(E).format(a.start_datetime,"keyboardDateTime24h")),1)]),_:2},1024),s("strong",null,"Conversation "+_(c+1),1)]),_:2},1024),e(L,null,{default:l(()=>[e(Q,{chat:a,expand:a.id},null,8,["chat","expand"])]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})):(u(),v(x,{key:1},{default:l(()=>[e(b,{class:"text-center"},{default:l(()=>[e(S,{indeterminate:""})]),_:1})]),_:1}))]),s("div",_e,[e(x,null,{default:l(()=>[e(C,{class:"text-h6"},{default:l(()=>t[10]||(t[10]=[i(" Job Fitting ")])),_:1}),e(b,null,{default:l(()=>[e(D,{modelValue:h.value,"onUpdate:modelValue":t[2]||(t[2]=a=>h.value=a),label:"Restriction",rows:"5",class:"mb-4"},null,8,["modelValue"]),e(D,{modelValue:j.value,"onUpdate:modelValue":t[3]||(t[3]=a=>j.value=a),label:"Resume",rows:"15",class:"mb-4"},null,8,["modelValue"]),o.value!==null?(u(),v(R,{key:0,onClick:t[4]||(t[4]=a=>A(o.value)),"prepend-icon":"mdi-brain",disabled:w.value||!o.value,color:"primary",block:""},{default:l(()=>t[11]||(t[11]=[i("AI Invoke")])),_:1},8,["disabled"])):M("",!0)]),_:1})]),_:1}),m.value?(u(),v(x,{key:0,class:"mt-4"},{default:l(()=>[e(C,{class:"text-h6"},{default:l(()=>t[12]||(t[12]=[i(" Fitting Results ")])),_:1}),e(b,null,{default:l(()=>[e(G,{modelValue:p.value,"onUpdate:modelValue":t[5]||(t[5]=a=>p.value=a),direction:"vertical"},{default:l(()=>[(u(!0),g(I,null,J(m.value,(a,c)=>(u(),v(q,{"prepend-icon":"mdi-account-check",value:c},{default:l(()=>[i("Result "+_(c+1),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"]),e(P,{modelValue:p.value,"onUpdate:modelValue":t[6]||(t[6]=a=>p.value=a),class:"flex-grow-1"},{default:l(()=>[(u(!0),g(I,null,J(m.value,(a,c)=>(u(),v(K,{value:c},{default:l(()=>[s("div",re,[e(D,{value:a.response,rows:"15"},null,8,["value"])])]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])]),_:1})]),_:1})):M("",!0)])])}}}),me=te(ce,[["__scopeId","data-v-18ded181"]]);export{me as default};
