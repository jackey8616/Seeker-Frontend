import{d as _,u as m,r as o,o as x,a as v,c,b as l,e as h,w as f,f as w}from"./index-qnMfkp-D.js";const b={class:"mail"},y=["src"],C=_({__name:"MailView",setup(k){const{axios:r}=m(),d=o([{text:"Sender",value:"sender"},{text:"Title",value:"title"},{text:"Snippet",value:"snippet"},{text:"Date",value:"date"}]),n=o([]),i=o(null);async function u(a){return(await r.value.get(`/mails/${a}`)).data.data.mail}function p(a){const s=new Blob([a],{type:"text/html"});return URL.createObjectURL(s)}return x(async()=>{const a=await r.value.get("/mails/list"),{data:s}=a.data;n.value=s.mail_infos,i.value=s.next_page_token,n.value.map(t=>{u(t.id).then(e=>{t.sender=e.sender,t.title=e.title,t.date=e.date,t.detailMail=e}).catch(e=>{console.error(`Download mail id ${t.id} cause error`,e)})})}),(a,s)=>{const t=v("EasyDataTable");return l(),c("div",b,[h(t,{style:{width:"100%"},headers:d.value,items:n.value},{expand:f(({detailMail:e})=>[e.extracted_data?(l(),c("iframe",{key:0,src:p(e.extracted_data),width:"100%"},null,8,y)):w("",!0)]),_:1},8,["headers","items"])])}}});export{C as default};
