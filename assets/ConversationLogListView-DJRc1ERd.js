import{d as M,u as P,a as U,r as s,o as E,c as L,e as o,w as t,f as r,g as T,h as n,k as w,t as i,j as C,l as m}from"./index-D69y5L_k.js";const j={class:"d-flex flex-column align-center pa-4"},q=M({__name:"ConversationLogListView",setup(O){const v=P(),{axios:z}=U(),h=[{title:"Action",key:"action",sortable:!1},{title:"Model",key:"model_name",sortable:!1},{title:"TotalToken(Input/Output)",key:"total_token",sortable:!1},{title:"CreateTime",key:"created_at",sortable:!0},{title:"UpdateTime",key:"updated_at",sortable:!0}],u=s([]),_=s(!1),f=s(100),k=s(1),g=s(),y=s(),b=s({page:1,itemsPerPage:20,sortBy:[{key:"updated_at",order:"desc"}]});E(async()=>{await x(1)});const x=async d=>{_.value=!0;const a=d===1?{}:{page_token:d>k.value?y.value:g.value};try{const l=await z.value.post("/conversation_logs",a);u.value=l.data.data.logs,g.value=l.data.data.cursor.previous_page_token,y.value=l.data.data.cursor.next_page_token,k.value=d,f.value=Math.max(100,u.value.length*5)}catch(l){console.error("Error fetching conversation logs:",l)}finally{_.value=!1}},B=async d=>{const a=d.page||1;await x(a)};return(d,a)=>{const l=r("v-icon"),p=r("v-tooltip"),D=r("v-btn"),N=r("router-link"),c=r("v-chip"),V=r("v-skeleton-loader"),A=r("v-data-table-server");return m(),L("div",null,[o(A,{options:b.value,"onUpdate:options":[a[0]||(a[0]=e=>b.value=e),B],headers:h,items:u.value,loading:_.value,"items-length":f.value,"items-per-page":"20",class:"elevation-1"},{"item.action":t(({item:e})=>[o(N,{to:{name:"conversation-log",params:{conversation_log_id:e._id}},custom:""},{default:t(({navigate:I})=>[o(D,{icon:"",size:"x-small",onClick:I},{default:t(()=>[o(l,{icon:"mdi-information-outline"}),o(p,{activator:"parent",location:"bottom"},{default:t(()=>a[1]||(a[1]=[n("Detail")])),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["to"])]),"item.model_name":t(({item:e})=>[o(c,{size:"x-small"},{default:t(()=>[n(i(e.model_name),1)]),_:2},1024)]),"item.total_token":t(({item:e})=>[n(i(e.total_input_token)+"/"+i(e.total_output_token),1)]),"item.created_at":t(({item:e})=>[o(c,{size:"x-small"},{default:t(()=>[n(i(C(v).format(e.created_at,"keyboardDateTime24h"))+" ",1),o(p,{activator:"parent",location:"bottom"},{default:t(()=>[n(i(e.created_at),1)]),_:2},1024)]),_:2},1024)]),"item.updated_at":t(({item:e})=>[e.updated_at!==null?(m(),w(c,{key:0,size:"x-small"},{default:t(()=>[n(i(C(v).format(e.updated_at,"keyboardDateTime24h"))+" ",1),o(p,{activator:"parent",location:"bottom"},{default:t(()=>[n(i(e.updated_at),1)]),_:2},1024)]),_:2},1024)):(m(),w(c,{key:1,size:"x-small"},{default:t(()=>a[2]||(a[2]=[n("N/A")])),_:1}))]),"no-data":t(()=>[T("div",j,[o(l,{size:"large",color:"grey",class:"mb-2"},{default:t(()=>a[3]||(a[3]=[n("mdi-alert-circle-outline")])),_:1}),a[4]||(a[4]=T("span",{class:"text-grey"},"No conversation logs found",-1))])]),loading:t(()=>[o(V,{type:"table-row@6"})]),_:1},8,["options","items","loading","items-length"])])}}});export{q as default};
