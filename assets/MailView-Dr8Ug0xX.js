import{d as f,u as w,r,o as b,a as l,c as d,b as i,e as u,w as _,f as k,g as y}from"./index-s6J23b9i.js";const C={class:"mail"},g=["onClick"],B=["src"],V=f({__name:"MailView",setup(D){const{axios:c}=w(),p=r([{text:"Sender",value:"sender"},{text:"Title",value:"title"},{text:"Snippet",value:"snippet"},{text:"Date",value:"date"}]),n=r([]),m=r(null);async function h(a){return(await c.value.get(`/mails/${a}`)).data.data.mail}function x(a){const s=new Blob([a],{type:"text/html"});return URL.createObjectURL(s)}return b(async()=>{const a=await c.value.get("/mails/list"),{data:s}=a.data;n.value=s.mail_infos,m.value=s.next_page_token,n.value.map(e=>{h(e.id).then(t=>{e.sender=t.sender,e.title=t.title,e.date=t.date,e.detailMail=t}).catch(t=>{console.error(`Download mail id ${e.id} cause error`,t)})})}),(a,s)=>{const e=l("router-link"),t=l("EasyDataTable");return i(),d("div",C,[u(t,{style:{width:"100%"},headers:p.value,items:n.value},{expand:_(({detailMail:o})=>[u(e,{to:{name:"mail-fitness",params:{thread_id:o.id}},custom:""},{default:_(({navigate:v})=>[y("button",{onClick:v},"AI Fitness",8,g)]),_:2},1032,["to"]),o.extracted_data?(i(),d("iframe",{key:0,src:x(o.extracted_data),width:"100%"},null,8,B)):k("",!0)]),_:1},8,["headers","items"])])}}});export{V as default};
