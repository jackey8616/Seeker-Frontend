import{d as U,u as E,a as P,r as j,o as R,c as v,g as N,b as u,e as t,w as a,f as o,k as l,h as y,F as g,l as w,j as k,t as _,i as $}from"./index-DwUt8arg.js";const W={key:0},q={class:"d-flex flex-row"},z={style:{"overflow-y":"auto",height:"100%"}},G=["href"],K=U({__name:"ConversationLogView",props:{conversation_log_id:{}},setup(C){const F=C,x=E(),{axios:I}=P(),m=j(-1),d=j();R(async()=>{d.value=await I.value.get(`/conversation_logs/${F.conversation_log_id}`).then(({data:s})=>{if(s.data.log==null)return null;const n={...s.data.log};for(let i of n.chats){const p=i.input.substring(17,i.input.length-17-1);i.json_input=JSON.parse(p)}return n})});function S(s){return s.system_instruction.join(`
`)}return(s,n)=>{const i=o("v-toolbar"),p=o("v-tab"),D=o("v-tabs"),b=o("v-textarea"),V=o("v-tabs-window-item"),L=o("v-tooltip"),T=o("v-btn"),r=o("v-text-field"),B=o("v-divider"),O=o("v-table"),A=o("v-tabs-window"),J=o("v-card");return d.value?(u(),v("div",W,[t(J,null,{default:a(()=>[t(i,{title:"ConversationLog"}),l("div",q,[t(D,{modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=e=>m.value=e),direction:"vertical"},{default:a(()=>[t(p,{value:"-1","prepend-icon":"$gear"},{default:a(()=>n[2]||(n[2]=[y("Setup")])),_:1}),(u(!0),v(g,null,w(d.value.chats,(e,c)=>(u(),k(p,{"prepend-icon":"$briefcase",value:c},{default:a(()=>[y("Job "+_(c+1),1)]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"]),t(A,{modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=e=>m.value=e),class:"flex-grow-1"},{default:a(()=>[t(V,{value:"-1"},{default:a(()=>[t(b,{readonly:"",label:"System Instruction","model-value":S(d.value),rows:"40"},null,8,["model-value"])]),_:1}),(u(!0),v(g,null,w(d.value.chats,(e,c)=>(u(),k(V,{value:c},{default:a(()=>[l("div",z,[t(r,{readonly:"",label:"Title","model-value":e.json_input.title,variant:"underlined"},{append:a(()=>[t(T,null,{default:a(()=>[l("a",{href:e.json_input.link,target:"_blank"},"Link",8,G),t(L,{activator:"parent",location:"bottom"},{default:a(()=>n[3]||(n[3]=[y("Open job in another tab")])),_:1})]),_:2},1024)]),_:2},1032,["model-value"]),t(r,{readonly:"",label:"Location","model-value":e.json_input.location,variant:"underlined"},null,8,["model-value"]),t(r,{readonly:"",label:"Salary","model-value":e.json_input.salary,variant:"underlined"},null,8,["model-value"]),t(r,{readonly:"",label:"WorkType","model-value":e.json_input.work_type,variant:"underlined"},null,8,["model-value"]),t(b,{readonly:"",label:"Details","model-value":e.json_input.details,rows:"10"},null,8,["model-value"]),t(B),t(r,{readonly:"",label:"AI runs / ends @","model-value":`${$(x).format(e.start_datetime,"keyboardDateTime24h")}  ~  ${$(x).format(e.end_datetime,"keyboardDateTime24h")}`,variant:"underlined"},null,8,["model-value"]),t(r,{readonly:"",label:"Input / Output tokens","model-value":`${e.input_token}  /  ${e.output_token}`,variant:"underlined"},null,8,["model-value"]),t(b,{readonly:"",label:"AI Output","model-value":e.output,rows:"30"},null,8,["model-value"]),e.metrics?(u(),k(O,{key:0,density:"compact"},{default:a(()=>[n[4]||(n[4]=l("thead",null,[l("tr",null,[l("td",null,"Metric Name"),l("td",null,"F1 Score"),l("td",null,"Precision"),l("td",null,"Recall")])],-1)),l("tbody",null,[(u(!0),v(g,null,w(e.metrics.rouge,(f,M)=>(u(),v("tr",null,[l("td",null,_(M),1),l("td",null,_(Number(f.f).toFixed(4)),1),l("td",null,_(Number(f.p).toFixed(4)),1),l("td",null,_(Number(f.r).toFixed(4)),1)]))),256))])]),_:2},1024)):N("",!0)])]),_:2},1032,["value"]))),256))]),_:1},8,["modelValue"])])]),_:1})])):N("",!0)}}});export{K as default};
